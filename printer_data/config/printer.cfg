# This file contains common pin mappings for the LDO Voron 2.4 Rev. D kit
# See docs/Config_Reference.md for a description of parameters.

# See docs/Config_Reference.md for a description of parameters.

## Voron Design VORON Trident 250/300/350mm Leviathan V1.1 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths                            [mcu] section
## Thermistor types                     [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Z Endstop Switch location            [safe_z_home] section
## Homing end position                  [gcode_macro G32] section
## Z Endstop Switch  offset for Z0      [stepper_z] section
## Probe points                         [quad_gantry_level] section
## Min & Max gantry corner postions     [quad_gantry_level] section
## PID tune                             [extruder] and [heater_bed] sections
## Probe pin                            [probe] section
## Fine tune E steps                    [extruder] section

[mcu]
##  Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2A0052000751303532383235-if00
restart_method: command
##--------------------------------------------------------------------

[mcu nhk]
##  Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_rp2040_4D4A393336136894-if00
restart_method: command
##--------------------------------------------------------------------

[mcu rpi]
## For input shaping
##--------------------------------------------------------------------
serial: /tmp/klipper_host_mcu

[adxl345]
cs_pin: rpi:None

[resonance_tester]
accel_chip: adxl345
probe_points:
    150, 150, 20

[input_shaper]
shaper_freq_x: 60.6
shaper_type_x: mzv
shaper_freq_y: 41.0
shaper_type_y: mzv   
##---------------------------------------------------------------------

[printer]
kinematics: corexy
max_velocity: 300  
max_accel: 10000
max_z_velocity: 15          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 5.0

#####################################################################
#   X/Y Stepper Settings
#####################################################################

##  B Stepper - Left
##  Connected to HV STEPPER 0
##  Endstop connected to X-ENDSTOP
[stepper_x]
step_pin: PB10
dir_pin: !PB11
enable_pin: !PG0
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:400  #set to 200 for 1.8 degree stepper
endstop_pin: PC1
position_min: 0
##--------------------------------------------------------------------

##  Uncomment below for 250mm build
#position_endstop: 250
#position_max: 250

##  Uncomment for 300mm build
position_endstop: 300
position_max: 300

##  Uncomment for 350mm build
#position_endstop: 350
#position_max: 350

##--------------------------------------------------------------------
homing_speed: 100   #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_x]
cs_pin: PE15
spi_bus: spi4
#diag0_pin: ^!PG1
interpolate: false
run_current: 0.8
sense_resistor: 0.075
stealthchop_threshold: 0

##  A Stepper - Right
##  Connected to HV STEPPER 1
##  Endstop connected to Y-ENDSTOP
[stepper_y]
step_pin: PF15
dir_pin: !PF14
enable_pin: !PE9
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:400  #set to 200 for 1.8 degree stepper
endstop_pin: PC2
position_min: 0
##--------------------------------------------------------------------

##  Uncomment for 250mm build
#position_endstop: 250
#position_max: 250

##  Uncomment for 300mm build
position_endstop: 309
position_max: 309

##  Uncomment for 350mm build
#position_endstop: 350
#position_max: 350

##--------------------------------------------------------------------
homing_speed: 100  #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_y]
cs_pin: PE11
spi_bus: spi4
#diag0_pin: ^!PE10
interpolate: false
run_current: 0.8
sense_resistor: 0.075
stealthchop_threshold: 0
 
#####################################################################
#   Z Stepper Settings
#####################################################################

## Z0 Stepper - Front Left
##  Connected to STEPPER 0
##  Endstop connected to Z-ENDSTOP
[stepper_z]
step_pin: PD4
dir_pin: PD3
enable_pin: !PD7
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4 
microsteps: 32
#endstop_pin: PC3
endstop_pin: probe:z_virtual_endstop

##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##  Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
#position_endstop: 0.5
##--------------------------------------------------------------------

##  Uncomment below for 250mm build
#position_max: 230

##  Uncomment below for 300mm build
position_max: 280

##  Uncomment below for 350mm build
#position_max: 330

##--------------------------------------------------------------------
position_min: -5
homing_speed: 8
second_homing_speed: 3
homing_retract_dist: 0

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z]
uart_pin: PD5
#diag_pin: ^!PD6
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##  Z1 Stepper - Rear Center
##  Connected to STEPPER 1
[stepper_z1]
step_pin: PC12
dir_pin: PC11
enable_pin: !PD2
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z1]
uart_pin: PD0
#diag_pin: ^!PD1
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##  Z2 Stepper - Front Right
##  Connected to STEPPER 2
[stepper_z2]
step_pin: PC9
dir_pin: PC8
enable_pin: !PC10
# Rotation Distance for TR8x8 = 8, TR8x4 = 4, TR8x2 = 2
rotation_distance: 4 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z2]
uart_pin: PA8
#diag_pin: ^!PA15
interpolate: false
run_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

#####################################################################
#   Extruder
#####################################################################

##  Connected to STEPPER 0
##  Heater - HEATER
##  Thermistor - TH0
[extruder]
step_pin: nhk:gpio23
dir_pin: nhk:gpio24
enable_pin: !nhk:gpio25
##  Update value below when you perform extruder calibration
##  If you ask for 100mm of filament, but in reality it is 98mm:
##  rotation_distance = <previous_rotation_distance> * <actual_extrude_distance> / 100
##  22.6789511 is a good starting point
rotation_distance: 22.90120482   #Bondtech 5mm Drive Gears
##  Update Gear Ratio depending on your Extruder Type
##  Use 50:10 for Stealthburner/Clockwork 2
##  Use 50:17 for Afterburner/Clockwork (BMG Gear Ratio)
##  Use 80:20 for M4, M3.1
gear_ratio: 50:10               #BMG Gear Ratio
microsteps: 32
full_steps_per_rotation: 200    #200 for 1.8 degree, 400 for 0.9 degree
nozzle_diameter: 0.400
filament_diameter: 1.75
heater_pin: nhk:gpio9
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
## Use "Generic 3950" for NTC 100k 3950 thermistors
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: nhk:gpio29
pullup_resistor: 2200
min_temp: 10
max_temp: 305
max_power: 1.0
min_extrude_temp: 170
max_extrude_only_distance: 70.0
max_extrude_cross_section: 5
#control = pid
#pid_kp = 26.213
#pid_ki = 1.304
#pid_kd = 131.721
##  Try to keep pressure_advance below 1.0
#pressure_advance: 0.05
##  Default is 0.040, leave stock
#pressure_advance_smooth_time: 0.040

##  E0 on MOTOR6
##  Connected to STEPPER 4
[tmc2209 extruder]
uart_pin: nhk:gpio0
tx_pin: nhk:gpio1
interpolate: false
run_current: 0.5
sense_resistor: 0.100
stealthchop_threshold: 0


#####################################################################
#   Bed Heater
#####################################################################

[heater_bed]
##  SSR Pin - HEATBED
##  Thermistor - TH1
heater_pin: PG11
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
## Use "Generic 3950" for Keenovo heaters
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: PA2
pullup_resistor: 2200
##  Adjust Max Power so your heater doesn't warp your bed. Rule of thumb is 0.4 watts / cm^2 .
max_power: 0.6
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

#####################################################################
#   Probe
#####################################################################

##Cartographer
[include cartographer.cfg]


[probe]
##  Inductive Probe
##  Connected to Z-PROBE
##  This probe is not used for Z height, only Quad Gantry Leveling
#pin: nhk:gpio10
#x_offset: 0
#y_offset: 25.0
#z_offset: 0
#speed: 10.0
#samples: 3
#samples_result: median
#sample_retract_dist: 3.0
#samples_tolerance: 0.008
#samples_tolerance_retries: 3

#####################################################################
#   Fan Control
#####################################################################

[fan]
##  Print Cooling Fan - FAN0
pin: nhk:gpio6
tachometer_pin: nhk:gpio17
tachometer_ppr: 2
kick_start_time: 0.5
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

[heater_fan hotend_fan]
##  Hotend Fan - FAN1
pin: nhk:gpio5
tachometer_pin: nhk:gpio16
tachometer_ppr: 2
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
##  If you are experiencing back flow, you can reduce fan_speed
#fan_speed: 1.0

[controller_fan controller_fan]
##  Controller fan - FAN2
pin: PF7
##tachometer_pin: PF6
kick_start_time: 0.5
heater: heater_bed

##Exhaust Fan
[include exhaustfan.cfg]

#[heater_fan exhaust_fan]
##  Exhaust fan - FAN3
#pin: PB3
#tachometer_pin: ^PB4
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0

##Nevermore Filter Fan
[include nevermore.cfg]

##Hotend Fan and PCF Check
[include tacho_macros.cfg]
[include fan_tach_monitor.cfg]

#####################################################################
#   Filament sensor
#####################################################################

[include Filament_Sensor.cfg]

#[filament_switch_sensor Filament]
#pause_on_runout: True
#runout_gcode: M600
#insert_gcode:
#event_delay: 3.0
#pause_delay: 0.5
#switch_pin: !PC0

#####################################################################
#   LED Control
#####################################################################

## Chamber Lighting (Optional)
## Connected to LED-STRIP
[output_pin caselight]
pin: PE6
pwm:true
hardware_pwm: False
value: 0.20 #startup value
shutdown_value: 0
#value:1
cycle_time: 0.00025

## Neopixel (nitehawk sb)
## Connected to led (nitehawk sb)
[output_pin pcb_led]
pin: !nhk:gpio8

## Neopixel (nitehawk sb)
## Connected to NEOPIXEL (nitehawk sb)
[neopixel sb_leds]
pin: nhk:gpio7
#   The pin connected to the neopixel. This parameter must be provided.
chain_count: 3
#   The number of Neopixel chips that are "daisy chained" to the
#   provided pin. The default is 1 (which indicates only a single
#   Neopixel is connected to the pin).
color_order: GRBW
#   Set the pixel order required by the LED hardware. Options are GRB,
#   RGB, GRBW, or RGBW. The default is GRB.
initial_RED: 1.0
initial_GREEN: 0.0
initial_BLUE: 1.0
initial_WHITE: 0.0
#   Sets the initial LED color of the Neopixel. Each value should be
#   between 0.0 and 1.0. The WHITE option is only available on RGBW
#   LEDs. The default for each color is 0.#

# Most configuration for the macros can be done by modifying the variables in the _sb_vars macro
# at the start of this file.

##########
# MACROS #
##########

##########################################################
#Adaptive Line Purge
##########################################################

[include line_purge.cfg]

###########################################################
# Nozzle Scrub
###########################################################

[include /home/lexworth/printer_data/config/nozzle_scrub.cfg]

##############################################################
##LED Control
##############################################################

[include LED_control.cfg]

#####################################################################
#   Accelerometer
#####################################################################
[adxl345]
cs_pin: nhk:gpio21
spi_software_sclk_pin: nhk:gpio18
spi_software_mosi_pin: nhk:gpio20
spi_software_miso_pin: nhk:gpio19

[resonance_tester]
accel_chip: adxl345
probe_points:
    175, 175, 20


#####################################################################
#   TH
# #####################################################################
[temperature_sensor chamber]
## Chamber Temperature - T1
sensor_type: ATC Semitec 104NT-4-R025H42G
sensor_pin: nhk:gpio28
min_temp: 0
max_temp: 100
gcode_id: chamber_th

[thermistor CMFB103F3950FANT]
temperature1: 0.0
resistance1: 32116.0
temperature2: 40.0
resistance2: 5309.0
temperature3: 80.0
resistance3: 1228.0

[temperature_sensor nh_temp]
## Nitehawk PCB Sensor
sensor_type: CMFB103F3950FANT
sensor_pin: nhk:gpio26
pullup_resistor: 2200
min_temp: 0
max_temp: 100
gcode_id: nh_th

#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[safe_z_home]
##  XY Location of the Z Endstop Switch
##  Update -10,-10 to the XY coordinates of your endstop pin 
##  (such as 157,305) after going through Z Endstop Pin
##  Location Definition step.
#home_xy_position:172,309
home_xy_position:150,150
speed:100
z_hop:10

[z_tilt]
##  Use Z_TILT_ADJUST to level the bed .
##  z_positions: Location of toolhead

##--------------------------------------------------------------------
## Uncomment below for 250mm build
#z_positions:
#    -50, 18
#    125, 298
#    300, 18
#points:
#    30, 5
#    125, 195
#    220, 5

## Uncomment below for 300mm build
z_positions:
   -50, 18
   150, 348
   350, 18
points:
   30, 5
   150, 245
   270, 5

## Uncomment below for 350mm build
#z_positions:
#   -50, 18
#   175, 398
#   400, 18
#points:
#   30, 5
#   175, 295
#   320, 5


##--------------------------------------------------------------------

speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.008

########################################
# EXP1 / EXP2 (display) pins
########################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PG9, EXP1_2=PG12,
    EXP1_3=PG13, EXP1_4=PG14,
    EXP1_5=PC13, EXP1_6=PC14,    # Slot in the socket on this side
    EXP1_7=PC15, EXP1_8=PF0,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PE2, EXP2_4=PE4,
    EXP2_5=PE3, EXP2_6=PA7,      # Slot in the socket on this side
    EXP2_7=PE5, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PE4

#####################################################################
#   Displays
#####################################################################

##  Uncomment the display that you have
#--------------------------------------------------------------------

[virtual_sdcard]
path: ~/printer_data/gcodes
[display_status]
[pause_resume]

#[display]
##  RepRapDiscount 128x64 Full Graphic Smart Controller
#lcd_type: st7920
#cs_pin: EXP1_4
#sclk_pin: EXP1_5
#sid_pin: EXP1_3
#menu_timeout: 40
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2

#[output_pin beeper]
#pin: EXP1_1

#--------------------------------------------------------------------

#[display]
##  mini12864 LCD Display
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2
#contrast: 63
#spi_software_miso_pin: EXP2_1
#spi_software_mosi_pin: EXP2_6
#spi_software_sclk_pin: EXP2_2

#[neopixel btt_mini12864]
##  To control Neopixel RGB in mini12864 display
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

##  Set RGB values on boot up for each Neopixel. 
##  Index 1 = display, Index 2 and 3 = Knob
#[delayed_gcode setdisplayneopixel]
#initial_duration: 1
#gcode:
#        SET_LED LED=btt_mini12864 RED=1 GREEN=1 BLUE=1 INDEX=1 TRANSMIT=0
#        SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=0
#        SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=3 

#--------------------------------------------------------------------


#####################################################################
#   Macros
#####################################################################

#####################################################################
##Bed Mesh Macro
#####################################################################

[bed_mesh]
speed: 300
horizontal_move_z: 5

##	Uncomment for 300mm build
mesh_min: 20, 25
mesh_max: 280, 275
zero_reference_position: 150, 150
mesh_pps: 0, 0

##--------------------------------------------------------------------
fade_start: 0.6
fade_end: 10.0
probe_count: 35, 35 # Values should be odd, so one point is directly at bed center
algorithm: bicubic

###############################################################################
##Temperature wait replace so klipper resumes immediately after reaching temp
###############################################################################

#Hotend wait
[gcode_macro M109]
rename_existing: M99109
gcode:
    #Parameters
    {% set s = params.S|float %}
    
    M104 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}  ; Set hotend temp
    {% if s != 0 %}
        TEMPERATURE_WAIT SENSOR=extruder MINIMUM={s} MAXIMUM={s+1}   ; Wait for hotend temp (within 1 degree)
    {% endif %}

#Bed wait - ***remove this after installed bed fans***
[gcode_macro M190]
rename_existing: M99190
gcode:
    #Parameters
    {% set s = params.S|float %}

    M140 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}   ; Set bed temp
    {% if s != 0 %}
        TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={s} MAXIMUM={s+1}  ; Wait for bed temp (within 1 degree)
    {% endif %}


#####################################################################
#   A better print_start macro for v2/trident
#####################################################################

## *** THINGS TO UNCOMMENT: ***
## Bed mesh (2 lines at 2 locations)
## Nevermore (if you have one)
## Z_TILT_ADJUST (For Trident only)
## QUAD_GANTRY_LEVEL (For V2.4 only)
## Beacon Contact logic (if you have one. 4 lines at 4 locations)


[gcode_macro PRINT_START]
gcode:
  # This part fetches data from your slicer. Such as bed, extruder, and chamber temps and size of your printer.
  {% set target_bed = params.BED|int %}
  {% set target_extruder = params.EXTRUDER|int %}
  {% set target_chamber = params.CHAMBER|default("45")|int %}
  {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
  {% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}

  #Fan Checks
  PREFLIGHT_CHECK
  HOTEND_FAN_CHECK

  ##  Uncomment for Beacon Contact (1 of 4 for beacon contact)
  SET_GCODE_OFFSET Z=0                                 # Set offset to 0

  # Home the printer, set absolute positioning and update the Stealthburner LEDs.
  STATUS_HOMING                                         # Set LEDs to homing-mode
  G28                                                   # Full home (XYZ)
  G90                                                   # Absolute position

  ##  Uncomment for bed mesh (1 of 2 for bed mesh)
  BED_MESH_CLEAR                                       # Clear old saved bed mesh (if any)

  # Check if the bed temp is higher than 90c - if so then trigger a heatsoak.
  {% if params.BED|int > 90 %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    M106 S255                                           # Turn on the PT-fan

    ##  Uncomment if you have a Nevermore.
    SET_FAN_SPEED FAN=Nevermore SPEED=1                 # Turn on the nevermore

    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Display info on display
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber temp

  # If the bed temp is not over 90c, then skip the heatsoak and just heat up to set temp with a 5 min soak
  {% else %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Soak for 1 min"               # Display info on display
    SET_FAN_SPEED FAN=exhaust SPEED=1                   # Set exhaust fan to full power
    G4 P60000                                           # Wait 1 min for the bedtemp to stabilize
  {% endif %}

  # Heat hotend to 150c. This helps with getting a correct Z-home.
  SET_DISPLAY_TEXT MSG="Hotend: 150c"                   # Display info on display
  M109 S150                                             # Heat hotend to 150c

  CLEAN_NOZZLE

  ##  Uncomment for Beacon contact (2 of 4 for beacon contact)
  CARTOGRAPHER_TOUCH                     # Calibrate z offset and beacon model

  ##  Uncomment for Trident (Z_TILT_ADJUST)
  SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  STATUS_LEVELING                                      # Set LEDs to leveling-mode
  Z_TILT_ADJUST                                        # Level the printer via Z_TILT_ADJUST
  G28 Z                                                # Home Z again after Z_TILT_ADJUST

  ##  Uncomment for V2.4 (Quad gantry level AKA QGL)
  #SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  #STATUS_LEVELING                                      # Set LEDs to leveling-mode
  #QUAD_GANTRY_LEVEL                                    # Level the printer via QGL
  #G28 Z                                                # Home Z again after QGL

  ##  Uncomment for bed mesh (2 of 2 for bed mesh)
  SET_DISPLAY_TEXT MSG="Bed mesh"                      # Display info on display
  STATUS_MESHING                                       # Set LEDs to bed mesh-mode
  BED_MESH_CALIBRATE                                   # Start the bed mesh (add ADAPTIVE=1) for adaptive bed mesh

  ## Uncomment for Cartographer
  CARTOGRAPHER_TOUCH                                    # Calibrate z offset only with hot nozzle

  # Heat up the hotend up to target via data from slicer
  SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"     # Display info on display
  STATUS_HEATING                                        # Set LEDs to heating-mode
  G1 X{x_wait} Y{y_wait} Z15 F9000                      # Go to center of the bed
  M107                                                  # Turn off partcooling fan
  M109 S{target_extruder}                               # Heat the hotend to set temp

  ##   Uncomment for Beacon Contact (4 of 4 for beacon contact)
  SET_GCODE_OFFSET Z=0.035                              # Add a little offset for hotend thermal expansion

  #Turn on filament sensor per filament
  {% if params.FILAMENT_TYPE == 'TPU_95A, TPU' %}
    RESPOND MSG="TPU Detected"
    SFS_DISABLE

  {% else %}
   RESPOND MSG="TPU Not Detected"
    SFS_ENABLE
    UPDATE_DELAYED_GCODE ID=ENCODERSENSORDELAY DURATION=60  #Enable encoder sensor 1 minute after print start
  {% endif %}
  
  SFS_ENABLE
  UPDATE_DELAYED_GCODE ID=ENCODERSENSORDELAY DURATION=60  #Enable encoder sensor 1 minute after print start
  
  # Get ready to print by doing a primeline and updating the LEDs
  CLEAN_NOZZLE
  STATUS_PRINTING                                       # Set LEDs to printing-mode
  #G0 X{x_wait - 50} Y4 F10000                           # Go to starting point
  #G0 Z0.4                                               # Raise Z to 0.4
  #G91                                                   # Incremental positioning 
  #G1 X100 E20 F1000                                     # Primeline
  #G90                                                   # Absolute position

  LINE_PURGE

  SET_DISPLAY_TEXT MSG="Printer goes brr"               # Display info on display
  
########################################################################################
##Pause Resume Cancel Macros
########################################################################################

[pause_resume]

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
gcode:
    # Parameters
    {% set z = params.Z|default(10)|int %}                                                   ; z hop amount

    {% if printer['pause_resume'].is_paused|int == 0 %}
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE={z}                              ; set z hop variable for reference in resume macro
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=etemp VALUE={printer['extruder'].target}    ; set hotend temp variable for reference in resume macro

        SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0                                    ; disable filament sensor
        SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0
        SAVE_GCODE_STATE NAME=PAUSE                                                          ; save current print position for resume
        BASE_PAUSE                                                                           ; pause print
        {% if (printer.gcode_move.position.z + z) < printer.toolhead.axis_maximum.z %}       ; check that zhop doesn't exceed z max
            G91                                                                              ; relative positioning
            G1 Z{z} F900                                                                     ; raise Z up by z hop amount
        {% else %}
            { action_respond_info("Pause zhop exceeds maximum Z height.") }                  ; if z max is exceeded, show message and set zhop value for resume to 0
            SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE=0
        {% endif %}
        G90                                                                                  ; absolute positioning
        G1 X261 Y309 F6000                                                                   ; park toolhead at purge bucket
        SAVE_GCODE_STATE NAME=PAUSEPARK                                                      ; save parked position in case toolhead is moved during the pause (otherwise the return zhop can error)
        M104 S0                                                                              ; turn off hotend
        SET_IDLE_TIMEOUT TIMEOUT=43200                                                       ; set timeout to 12 hours
    {% endif %}


[gcode_macro RESUME]
rename_existing: BASE_RESUME
variable_zhop: 0
variable_etemp: 0
gcode:
    # Parameters
    {% set e = params.E|default(2.5)|int %}                                          ; hotend prime amount (in mm)

    {% if printer['pause_resume'].is_paused|int == 1 %}
        SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1                          ; enable filament sensor
        SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1
        STATUS_PRINTING                                                                    ; reset LCD color
        SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout}  ; set timeout back to configured value
        {% if etemp > 0 %}
            M109 S{etemp|int}                                                        ; wait for hotend to heat back up
        {% endif %}
        RESTORE_GCODE_STATE NAME=PAUSEPARK MOVE=1 MOVE_SPEED=100                     ; go back to parked position in case toolhead was moved during pause (otherwise the return zhop can error)
        G91                                                                          ; relative positioning
        M83                                                                          ; relative extruder positioning
        {% if printer[printer.toolhead.extruder].temperature >= printer.configfile.settings.extruder.min_extrude_temp %}
            G1 Z{zhop * -1} E{e} F900                                                ; prime nozzle by E, lower Z back down
        {% else %}
            G1 Z{zhop * -1} F900                                                     ; lower Z back down without priming (just in case we are testing the macro with cold hotend)
        {% endif %}
        RESTORE_GCODE_STATE NAME=PAUSE MOVE=1 MOVE_SPEED=60                          ; restore position
        BASE_RESUME                                                                  ; resume print
    {% endif %}


[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
variable_park: True
gcode:
  ## Move head and retract only if not already in the pause state and park set to true

  {% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
    _TOOLHEAD_PARK_PAUSE_CANCEL
  {% endif %}
  UPDATE_DELAYED_GCODE ID=exhaust_off DURATION=300       # Turn off exhuast after 5 minutes
  SFS_DISABLE                                            # Turn off filament sensors
  TURN_OFF_HEATERS
  CANCEL_PRINT_BASE

###############################################################################################
##Load Unload Macros
###############################################################################################

##Load Filiament
[gcode_macro LOAD_FILAMENT]
variable_load_distance:   50
variable_purge_distance:  30
gcode:
    {% set speed = params.SPEED|default(300) %}
    {% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity  * 60 %}
    SAVE_GCODE_STATE NAME=load_state
    G91
    G92 E0
    G1 E{load_distance} F{max_velocity} # fast-load
    G1 E{purge_distance} F{speed} # purge
    RESTORE_GCODE_STATE NAME=load_state


##Unload Filament
[gcode_macro UNLOAD_FILAMENT]
variable_unload_distance:  70
variable_purge_distance:  25
gcode:
    {% set speed = params.SPEED|default(300) %}
    {% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity  * 60 %}
    SAVE_GCODE_STATE NAME=unload_state
    G91
    G92 E0
    G1 E{purge_distance} F{speed} # purge
    G1 E-{unload_distance} F{max_velocity} # fast-unload
    RESTORE_GCODE_STATE NAME=unload_state

####################################################################################################
##Print End Macro
####################################################################################################

[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    # safe anti-stringing move coords
    {% set th = printer.toolhead %}
    {% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
    {% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
    {% set z_safe = [th.position.z + 20, th.axis_maximum.z]|min %}
    
    SAVE_GCODE_STATE NAME=STATE_PRINT_END
    
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-12.0 F3600                ; retract filament
    
    TURN_OFF_HEATERS
    
    G90                                      ; absolute positioning
    G0 X{x_safe} Y{y_safe} Z{z_safe} F20000  ; move nozzle to remove stringing
    G0 X261 Y{th.axis_maximum.y} F3600       ; park nozzle at rear
    M107                                     ; turn off fan

    SFS_DISABLE                                            # Turn off filament sensors

    CLEAN_NOZZLE                                           # Scrub nozzle
    
    UPDATE_DELAYED_GCODE ID=filter_off DURATION=180        # Turn off Nevermore after 3 minutes
    SET_FAN_SPEED FAN=exhaust SPEED=1                      # Turn on exhaust if not already on
    UPDATE_DELAYED_GCODE ID=exhaust_off DURATION=300       # Turn off exhuast after 5 minutes
    RESTORE_GCODE_STATE NAME=STATE_PRINT_END

[exclude_object]

[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 36.071
#*# pid_ki = 1.359
#*# pid_kd = 239.421
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 27.242
#*# pid_ki = 2.929
#*# pid_kd = 63.339
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.039524, -0.039093, -0.044260, -0.042521, -0.047703, -0.051860, -0.049716, -0.052956, -0.050863, -0.053894, -0.056473, -0.053670, -0.054030, -0.055423, -0.055524, -0.055547, -0.055019, -0.054525, -0.057322, -0.057513, -0.055808, -0.053953, -0.051437, -0.050499, -0.048115, -0.044452, -0.043416, -0.042542, -0.039356, -0.039216, -0.036940, -0.033954, -0.032585, -0.030760, -0.034140
#*# 	  -0.025482, -0.026561, -0.028996, -0.031266, -0.034100, -0.037514, -0.038998, -0.039287, -0.040204, -0.041847, -0.042668, -0.042713, -0.041752, -0.042648, -0.042699, -0.043045, -0.043793, -0.045089, -0.045510, -0.045470, -0.046215, -0.043356, -0.041800, -0.040431, -0.038525, -0.035468, -0.034262, -0.033312, -0.033276, -0.031453, -0.029183, -0.028814, -0.023976, -0.022144, -0.024727
#*# 	  -0.017171, -0.018787, -0.020210, -0.023075, -0.025933, -0.028941, -0.030646, -0.030688, -0.031597, -0.032498, -0.033718, -0.032742, -0.032814, -0.032373, -0.033951, -0.033981, -0.034269, -0.035606, -0.036692, -0.036616, -0.036062, -0.034981, -0.034035, -0.032594, -0.030735, -0.027779, -0.027283, -0.027205, -0.026798, -0.025491, -0.022886, -0.020632, -0.018675, -0.016307, -0.018303
#*# 	  -0.012128, -0.012108, -0.012753, -0.019212, -0.018120, -0.023503, -0.024296, -0.023051, -0.025143, -0.028232, -0.026445, -0.027291, -0.026190, -0.025541, -0.028018, -0.029069, -0.028899, -0.029695, -0.031035, -0.032193, -0.032329, -0.030334, -0.029292, -0.028799, -0.027280, -0.024722, -0.023722, -0.023810, -0.024045, -0.022538, -0.019481, -0.017487, -0.015574, -0.013778, -0.016449
#*# 	  -0.010256, -0.010502, -0.011469, -0.014163, -0.017269, -0.019027, -0.020725, -0.019703, -0.020781, -0.022692, -0.023884, -0.023375, -0.023301, -0.023958, -0.024073, -0.024074, -0.024740, -0.025984, -0.027313, -0.029226, -0.028692, -0.027401, -0.026060, -0.024609, -0.023726, -0.020668, -0.020041, -0.020504, -0.020767, -0.018968, -0.017199, -0.015485, -0.013477, -0.011320, -0.014825
#*# 	  0.003362, -0.001685, -0.007499, -0.003138, -0.008695, -0.014131, -0.008337, -0.015311, -0.014150, -0.013495, -0.019563, -0.014975, -0.014538, -0.018960, -0.017131, -0.018412, -0.019371, -0.019486, -0.023809, -0.023129, -0.024567, -0.023443, -0.020314, -0.019682, -0.017562, -0.014744, -0.014514, -0.013606, -0.014742, -0.013389, -0.012551, -0.011492, -0.008951, -0.006677, -0.010165
#*# 	  0.008918, 0.007286, 0.006155, 0.002972, 0.000858, -0.002037, -0.002938, -0.003573, -0.004956, -0.007653, -0.008204, -0.007960, -0.008462, -0.012069, -0.011005, -0.011978, -0.011983, -0.014044, -0.014870, -0.015769, -0.016101, -0.015849, -0.012139, -0.012155, -0.010214, -0.006757, -0.008964, -0.006745, -0.006816, -0.005224, -0.005105, -0.007110, -0.001074, -0.000953, -0.003655
#*# 	  0.018055, 0.016508, 0.014322, 0.012052, 0.009784, 0.011713, -0.000315, 0.003206, 0.006920, -0.004671, -0.000726, 0.002084, -0.005232, 0.001513, -0.008589, -0.005253, -0.005641, -0.006457, -0.007097, -0.008131, -0.008038, -0.007105, -0.007266, -0.005326, -0.003696, -0.002548, -0.002066, 0.000355, 0.001448, 0.001215, -0.000154, 0.000881, 0.001677, 0.004341, 0.000967
#*# 	  0.020211, 0.019690, 0.018426, 0.016493, 0.012680, 0.010366, 0.007425, 0.006860, 0.005709, 0.004188, 0.002529, 0.001323, 0.001061, -0.000469, -0.001306, -0.002520, -0.006071, 0.000394, -0.003468, -0.003913, -0.002997, -0.003502, -0.003146, -0.002305, -0.002862, -0.000222, 0.001406, 0.004641, 0.004057, 0.006663, 0.003534, 0.003789, 0.008088, 0.006069, 0.002854
#*# 	  0.025724, 0.016393, 0.031568, 0.014035, 0.018449, 0.022293, 0.007793, 0.011771, 0.017070, 0.007543, 0.005857, 0.005238, 0.010778, 0.003011, 0.000732, 0.005793, -0.004495, 0.003515, 0.003046, -0.005592, 0.001899, 0.003087, -0.004998, 0.002321, -0.000508, 0.000981, 0.006349, 0.004542, 0.004762, 0.002982, 0.006264, 0.003462, 0.001334, 0.009661, -0.000116
#*# 	  0.030802, 0.029729, 0.029013, 0.026148, 0.016188, 0.026451, 0.018116, 0.010237, 0.021510, 0.011869, 0.003877, 0.015821, 0.001481, 0.005909, 0.008425, -0.003539, 0.001623, 0.006412, -0.005385, -0.000342, -0.000594, -0.000301, 0.000649, 0.001642, 0.001983, 0.003878, 0.005963, 0.007527, 0.005623, 0.004642, 0.005923, 0.001472, 0.011677, 0.008942, 0.005719
#*# 	  0.036782, 0.035531, 0.023395, 0.041429, 0.029037, 0.016416, 0.032555, 0.022905, 0.012645, 0.025040, 0.014823, 0.006250, 0.019079, 0.010039, 0.000999, 0.012431, 0.005269, -0.001936, 0.008975, 0.002386, -0.004486, 0.007001, -0.002517, 0.002717, 0.008830, 0.001122, 0.007323, 0.013195, 0.001149, 0.010464, 0.008220, 0.004039, 0.013817, 0.011779, 0.007796
#*# 	  0.037999, 0.035616, 0.033753, 0.031157, 0.020029, 0.036025, 0.024843, 0.016040, 0.031541, 0.019048, 0.007906, 0.022309, 0.012426, 0.011599, 0.008847, 0.007333, 0.006477, 0.005762, 0.004095, 0.003177, 0.003226, 0.002935, 0.002727, 0.004055, 0.004887, 0.005693, 0.007192, 0.006722, 0.007861, 0.009066, 0.010191, 0.011449, 0.012213, 0.013905, 0.010037
#*# 	  0.037607, 0.035827, 0.043847, 0.019926, 0.028821, 0.036438, 0.014846, 0.023169, 0.030676, 0.008361, 0.023363, 0.013534, 0.004389, 0.019714, 0.007803, -0.002048, 0.013607, 0.004675, -0.003975, 0.010121, 0.001554, -0.004347, 0.010667, 0.003833, 0.004474, 0.006307, 0.006260, 0.000389, 0.006712, 0.008100, 0.004000, 0.016880, 0.011567, 0.012796, 0.010500
#*# 	  0.033738, 0.030232, 0.038899, 0.027340, 0.025428, 0.022857, 0.019965, 0.019660, 0.017950, 0.015619, 0.012001, 0.010857, 0.016755, -0.001256, 0.004281, 0.003176, 0.002353, 0.001681, 0.000603, -0.000141, 0.006535, -0.006895, 0.000777, 0.002343, 0.002538, 0.003561, -0.002689, 0.004827, 0.011727, -0.001144, 0.007564, 0.008873, 0.009990, 0.018603, 0.008009
#*# 	  0.031759, 0.042330, 0.027055, 0.013953, 0.034161, 0.019245, 0.009643, 0.026949, 0.015577, 0.014294, 0.011317, 0.009083, 0.007965, 0.005565, -0.005582, 0.010255, 0.000455, -0.008138, 0.007205, -0.002355, -0.011183, 0.005049, -0.002735, -0.008911, 0.008079, -0.004712, 0.001491, 0.002184, -0.006074, 0.009185, 0.004212, -0.002248, 0.013956, 0.007811, 0.004147
#*# 	  0.038859, 0.014944, 0.025564, 0.032838, 0.009821, 0.017380, 0.024941, 0.005110, 0.015351, 0.023136, 0.001326, 0.009476, 0.016660, -0.003765, 0.002799, 0.009799, -0.008578, 0.008228, -0.002119, -0.011301, 0.004398, 0.003746, -0.012842, -0.003116, 0.006563, -0.009425, -0.000345, 0.007544, -0.008813, 0.008993, -0.007108, 0.004036, 0.015004, -0.000590, 0.003358
#*# 	  0.041507, 0.013524, 0.038924, 0.037004, 0.008690, 0.031372, 0.018024, 0.005138, 0.028445, 0.015476, 0.001145, 0.010173, 0.020752, -0.004076, 0.004622, 0.013998, -0.008788, 0.000000, 0.010236, -0.012160, -0.002758, 0.006708, -0.012833, -0.002045, 0.008988, -0.008953, -0.001070, 0.007241, -0.011138, -0.000822, 0.010739, -0.006944, 0.013409, 0.016410, -0.005685
#*# 	  0.027290, 0.038078, 0.025170, 0.022794, 0.021570, 0.019859, 0.017536, 0.018280, 0.017101, 0.016339, 0.013965, 0.013526, 0.011353, 0.009448, 0.007863, 0.006418, 0.004814, 0.003741, 0.002599, 0.001869, -0.008905, 0.009836, -0.000729, -0.009123, 0.011644, 0.002112, -0.008516, 0.010150, -0.008951, 0.001590, 0.004618, 0.005376, 0.007953, 0.010745, 0.006901
#*# 	  0.029181, 0.028172, 0.011365, 0.039542, 0.023201, 0.006638, 0.032178, 0.019090, 0.006274, 0.030340, 0.016016, 0.002340, 0.026724, 0.013159, 0.000563, 0.022045, 0.009488, -0.003482, 0.017400, 0.005368, -0.005753, 0.015099, -0.007794, -0.006306, 0.015303, 0.005013, -0.007323, 0.013205, -0.008818, 0.002179, 0.014750, -0.003621, 0.008045, 0.021507, 0.009041
#*# 	  0.026695, 0.038156, 0.012251, 0.022624, 0.033485, 0.008114, 0.018154, 0.030107, 0.004456, 0.016442, 0.026175, 0.002209, 0.013042, 0.011863, -0.001010, 0.010592, 0.020135, -0.003650, 0.006854, 0.017245, -0.006034, 0.004929, 0.015207, -0.005595, 0.005164, 0.016141, -0.007104, 0.003236, 0.013349, -0.010197, 0.004271, 0.018537, -0.003731, 0.023761, 0.008821
#*# 	  0.009970, 0.039948, 0.022737, 0.006295, 0.034167, 0.030935, 0.000851, 0.028179, 0.026733, -0.000327, 0.025255, 0.010250, -0.002046, 0.023318, 0.008535, -0.005593, 0.020525, 0.018110, -0.006297, 0.017323, 0.003143, -0.008941, 0.015458, 0.002704, -0.008542, 0.015305, 0.001616, -0.012033, 0.012708, -0.000204, 0.001282, 0.015532, 0.004807, 0.007367, 0.018035
#*# 	  0.019958, 0.007911, 0.032348, 0.017426, 0.015408, 0.025137, 0.011169, 0.011003, 0.023065, 0.010434, 0.008617, -0.002301, 0.020982, 0.009142, -0.004371, 0.019715, 0.004795, 0.004523, 0.015224, 0.002292, 0.002835, 0.013482, 0.002436, -0.008612, 0.014796, 0.002096, -0.008769, 0.011649, -0.012313, -0.000077, 0.013936, -0.009373, 0.004127, 0.019135, 0.004214
#*# 	  0.015073, 0.001382, 0.014663, 0.026947, -0.003118, 0.008916, 0.020620, -0.006109, 0.007455, 0.007368, 0.006925, 0.006887, 0.006810, 0.006847, 0.005067, 0.004534, 0.003850, 0.002263, -0.008544, 0.014474, 0.001268, 0.001926, 0.002534, 0.002778, 0.002410, 0.002861, 0.000719, -0.000920, -0.000912, -0.001275, -0.000251, 0.000596, 0.001358, -0.008468, 0.001540
#*# 	  0.008092, 0.008123, 0.008372, 0.006537, 0.004333, -0.007297, 0.001385, 0.002612, 0.002324, 0.002177, 0.000922, 0.001310, 0.000597, 0.000234, -0.001306, -0.001380, -0.001750, -0.012834, -0.002755, -0.002470, -0.012405, 0.009038, -0.001397, -0.000434, 0.000341, -0.000455, -0.000375, -0.001984, -0.003529, -0.002635, -0.001427, -0.001313, 0.009919, -0.011984, 0.008702
#*# 	  0.002497, 0.004211, -0.010365, 0.001006, 0.000196, -0.014515, 0.008942, -0.002059, -0.013813, 0.008478, -0.015610, -0.004524, 0.007335, -0.015439, -0.004635, 0.006583, -0.015603, -0.006132, 0.004917, -0.017289, -0.006174, 0.005210, -0.016223, -0.005127, 0.007041, -0.002684, -0.014569, 0.006378, -0.003996, -0.016243, 0.005489, -0.004731, -0.015475, 0.008290, -0.016863
#*# 	  -0.000747, -0.011276, 0.009766, -0.002272, -0.012995, 0.004507, -0.015861, -0.006151, 0.004527, -0.015855, -0.007117, 0.003599, -0.015858, -0.006795, 0.002910, -0.015418, -0.007030, 0.001296, -0.017378, -0.008352, -0.008382, -0.008266, -0.008143, -0.005633, -0.004246, -0.003845, -0.003377, -0.014094, -0.005744, 0.003257, -0.014600, -0.004505, 0.007656, -0.010371, 0.006514
#*# 	  -0.004432, -0.002924, -0.005269, -0.006086, -0.006488, -0.009304, -0.009448, -0.009636, -0.009246, -0.008666, -0.009222, -0.008951, -0.008776, -0.008867, -0.009862, -0.009031, -0.008928, -0.011690, -0.019436, -0.011837, -0.011434, -0.011346, -0.009484, -0.008529, -0.006287, -0.005106, -0.005598, -0.007376, -0.006923, -0.007399, -0.005365, -0.004019, -0.002544, -0.000388, -0.003548
#*# 	  -0.012444, -0.020928, -0.011632, -0.004918, -0.022342, -0.016475, -0.010797, -0.025592, -0.008097, -0.024456, -0.024854, -0.007720, -0.022522, -0.022968, -0.008638, -0.024487, -0.010187, -0.018434, -0.026591, -0.012082, -0.018782, -0.018629, -0.017413, -0.015918, -0.014482, -0.013786, -0.013829, -0.014696, -0.014432, -0.012843, -0.010756, -0.009732, -0.008805, -0.005921, -0.009725
#*# 	  -0.021341, -0.020190, -0.020600, -0.020517, -0.021644, -0.023973, -0.025100, -0.033043, -0.017155, -0.031590, -0.015369, -0.015394, -0.029889, -0.015434, -0.024499, -0.031677, -0.017803, -0.025635, -0.031262, -0.018027, -0.024736, -0.032531, -0.017393, -0.029450, -0.019892, -0.012227, -0.028269, -0.021350, -0.013490, -0.018413, -0.015593, -0.014559, -0.013433, -0.012043, -0.015502
#*# 	  -0.029189, -0.027807, -0.032741, -0.019825, -0.026450, -0.027883, -0.023617, -0.029985, -0.036180, -0.024085, -0.030302, -0.034711, -0.022947, -0.029206, -0.035887, -0.024841, -0.030856, -0.036583, -0.025191, -0.036064, -0.030616, -0.029852, -0.034540, -0.022306, -0.027527, -0.031505, -0.020752, -0.026080, -0.030922, -0.017168, -0.020506, -0.024941, -0.012025, -0.016608, -0.019885
#*# 	  -0.026855, -0.035477, -0.022188, -0.028071, -0.028688, -0.029235, -0.029481, -0.030272, -0.031587, -0.031581, -0.032295, -0.031536, -0.026794, -0.036588, -0.032133, -0.028635, -0.037605, -0.033350, -0.028809, -0.037684, -0.032433, -0.027232, -0.035567, -0.029498, -0.024792, -0.031648, -0.026572, -0.022363, -0.029031, -0.022927, -0.017141, -0.023626, -0.013932, -0.017202, -0.019680
#*# 	  -0.030093, -0.023642, -0.027841, -0.025186, -0.023503, -0.027390, -0.026246, -0.025265, -0.030266, -0.025132, -0.027225, -0.031258, -0.027041, -0.029090, -0.032611, -0.027539, -0.028727, -0.032291, -0.027282, -0.027261, -0.032289, -0.026960, -0.028994, -0.029135, -0.023906, -0.025554, -0.026678, -0.022113, -0.020312, -0.022799, -0.018322, -0.017060, -0.015343, -0.012958, -0.017128
#*# 	  -0.029610, -0.025728, -0.025235, -0.025526, -0.025221, -0.024919, -0.025586, -0.023039, -0.025725, -0.028378, -0.026853, -0.030116, -0.028513, -0.029016, -0.030746, -0.029147, -0.030234, -0.031731, -0.028929, -0.030775, -0.029243, -0.028642, -0.029917, -0.026733, -0.025440, -0.024711, -0.024763, -0.023670, -0.020401, -0.020475, -0.017179, -0.016181, -0.015640, -0.012424, -0.017631
#*# 	  -0.031474, -0.028937, -0.027702, -0.027615, -0.028287, -0.027424, -0.027122, -0.026111, -0.026623, -0.028641, -0.030906, -0.032453, -0.032242, -0.032595, -0.032660, -0.033389, -0.034339, -0.034129, -0.034053, -0.032908, -0.032636, -0.033976, -0.033640, -0.031581, -0.029411, -0.028199, -0.027283, -0.026516, -0.024471, -0.023536, -0.021990, -0.020631, -0.020179, -0.017276, -0.023048
#*# x_count = 35
#*# y_count = 35
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = direct
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 280.0
#*# min_y = 25.0
#*# max_y = 275.0
#*#
#*# [probe]
#*# z_offset = 0.410
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 2000
#*# scanner_touch_speed = 3
#*# scanner_touch_z_offset = 0.060
#*#
#*# [scanner model default]
#*# model_coef = 1.5058421959645338,
#*# 	1.8256307561113172,
#*# 	0.7878988840720696,
#*# 	0.32198133873753454,
#*# 	0.25153977307237735,
#*# 	0.5602912326626989,
#*# 	0.039617471366929294,
#*# 	-0.6466448175138596,
#*# 	0.06629079574937721,
#*# 	0.3911525186764242
#*# model_domain = 3.179772953168863e-07,3.3035496996269304e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 25.611401
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.0.0
